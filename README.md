# Aetherys Orchestrator

[![cloudflarebutton]]

Aetherys Orchestrator is a futuristic, visually stunning, and feature-dense AI Agent workspace designed to rival OpenWebUI. It serves as a central command interface for interacting with Cloudflare Agents, managing deployments, and orchestrating complex workflows.

The application features a three-pane layout:
1. **Command Center (Left Sidebar):** Manages sessions, projects, and connected MCP servers.
2. **Nexus Chat (Center):** A generative conversational interface supporting rich markdown, STT/TTS (Speech-to-Text/Text-to-Speech via Web APIs), and multi-modal inputs. It communicates with the backend Durable Object 'Agent'.
3. **Artifact Foundry (Right Panel):** A dedicated workspace that renders 'Artifacts'â€”code snippets, HTML previews, SVG graphics, and documents generated by the AIâ€”separate from the chat stream, similar to Claude Artifacts.

The backend (Worker) acts as an intelligent orchestrator. It uses the `mcp-client` to connect to remote tools and defines local tools for 'Simulated' R2 file management, D1 querying, and Cloudflare Worker deployment (mocking the API calls for safety while demonstrating the logic). The UI includes a robust 'Settings' modal to configure Cloudflare AI Gateway providers, API keys, and model parameters.

## âœ¨ Key Features

- **Triple-Pane Workspace**: Command Center sidebar, generative Nexus Chat, and Artifact Foundry panel
- **Real-Time Conversational AI**: Streaming chat with markdown rendering, multi-modal support (STT/TTS, image/audio/video processing)
- **MCP Tool Integration**: Connects to remote MCP servers with automatic tool discovery and execution
- **Artifact Rendering**: Dedicated panel for code previews, HTML rendering, SVG, and interactive canvases
- **Session & Project Management**: Persistent chat history via Durable Objects, file explorer for R2 context
- **Cloudflare-Native**: Workers, Durable Objects, R2 simulation, D1 querying, Worker deployment tools
- **Cyberpunk UI**: Glassmorphism effects, smooth animations (Framer Motion), responsive design
- **Multi-Model Support**: Configurable via Cloudflare AI Gateway (Gemini, OpenAI-compatible models)
- **File Handling**: Upload any file type to R2 (session-associated), semantic vector search, generation modals
- **Advanced Capabilities**: Sandbox/browser rendering, SQL memory (D1), canvas artifacts, custom Worker creation/deploy

> **Note**: AI capabilities have rate limits on requests to shared servers. For production, configure your own Cloudflare AI Gateway.

## ğŸ›  Tech Stack

- **Frontend**: React 18, Vite, TypeScript, Tailwind CSS, shadcn/ui, Framer Motion, Zustand, React Router
- **Backend**: Cloudflare Workers, Agents SDK (Durable Objects), Hono, OpenAI SDK (via AI Gateway)
- **AI & Tools**: Model Context Protocol (MCP) Client, mcp-remote, @modelcontextprotocol/sdk
- **UI/UX**: Lucide React icons, Sonner toasts, React Query, React Hook Form
- **Utilities**: clsx, tailwind-merge, Zod validation, date-fns, uuid
- **Deployment**: Wrangler CLI, Cloudflare Pages/Assets

## ğŸš€ Quick Start

1. **Clone & Install**:
   ```bash
   git clone <your-repo>
   cd aetherys-orchestrator
   bun install
   ```

2. **Configure Environment** (edit `wrangler.jsonc`):
   ```json
   "vars": {
     "CF_AI_BASE_URL": "https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai",
     "CF_AI_API_KEY": "your-api-key"
   }
   ```

3. **Development**:
   ```bash
   bun run dev
   ```
   Open [http://localhost:3000](http://localhost:3000)

4. **Deploy**:
   ```bash
   bun run deploy
   ```

## ğŸ“‹ Installation

### Prerequisites
- [Bun](https://bun.sh/) (package manager)
- [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/) (Cloudflare Workers)
- Cloudflare account with AI Gateway configured

### Steps
1. Install dependencies:
   ```bash
   bun install
   ```

2. Generate types:
   ```bash
   bun run cf-typegen
   ```

3. **Environment Setup**:
   - Update `wrangler.jsonc` with your `CF_AI_BASE_URL` and `CF_AI_API_KEY`.
   - Optional: Add `SERPAPI_KEY` or `OPENROUTER_API_KEY` for extended tools.

## ğŸ’» Development

- **Local Dev Server**:
  ```bash
  bun run dev
  ```
  Supports hot reload, accessible via `0.0.0.0:3000`.

- **Build for Production**:
  ```bash
  bun run build
  ```

- **Preview Build**:
  ```bash
  bun run preview
  ```

- **Linting**:
  ```bash
  bun run lint
  ```

### Project Structure
```
â”œâ”€â”€ src/              # React frontend (pages, components, hooks, lib)
â”œâ”€â”€ worker/           # Cloudflare Worker backend (agents, tools, routes)
â”œâ”€â”€ tailwind.config.js # Custom theme (cyberpunk colors, animations)
â””â”€â”€ wrangler.jsonc    # Deployment config
```

### Key APIs
- **Chat**: `POST /api/chat/:sessionId/chat` (streaming/non-streaming)
- **Sessions**: `GET/POST/DELETE /api/sessions`
- **Tools**: Auto-discovered via MCP (web_search, get_weather, Cloudflare bindings)

## ğŸ® Usage Examples

1. **New Chat Session**:
   ```bash
   curl -X POST /api/sessions -d '{"firstMessage": "Build a landing page"}'
   ```

2. **Send Message** (streaming):
   ```bash
   curl -X POST /api/chat/{sessionId}/chat \
     -H "Content-Type: application/json" \
     -d '{"message": "Deploy to Cloudflare", "stream": true}'
   ```

3. **Switch Models**:
   ```bash
   curl -X POST /api/chat/{sessionId}/model -d '{"model": "google-ai-studio/gemini-2.5-pro"}'
   ```

In the UI:
- Open Settings modal to configure AI Gateway/MCP endpoints.
- Chat naturally; AI auto-uses tools (R2 upload, D1 query, Worker deploy).
- Artifacts auto-render in right panel (code â†’ live preview).

## â˜ï¸ Deployment

Deploy to Cloudflare Workers with Pages/Assets bundling:

1. **Login**:
   ```bash
   wrangler login
   wrangler whoami
   ```

2. **Deploy**:
   ```bash
   bun run deploy
   ```
   Or manually:
   ```bash
   bun run build
   wrangler deploy
   ```

[![cloudflarebutton]]

### Custom Domain & Secrets
```bash
wrangler secret put CF_AI_API_KEY
wrangler deploy --env production
```

### Assets (Static Files)
Auto-handled via `assets` in `wrangler.jsonc` (SPA fallback).

## ğŸ”§ Configuration

- **AI Models**: Edit `src/lib/chat.ts` MODELS array.
- **MCP Servers**: Add to `worker/mcp-client.ts` `MCP_SERVERS`.
- **Tools**: Extend `worker/tools.ts` customTools or MCP integrations.
- **UI Theme**: Customize `tailwind.config.js` (cyberpunk gradients, glassmorphism).

## ğŸ¤ Contributing

1. Fork & clone
2. `bun install`
3. Create feature branch
4. `bun run dev` & test
5. PR with clear description

## ğŸ“„ License

MIT License. See [LICENSE](LICENSE) for details.

## ğŸ™Œ Support

- [Cloudflare Workers Docs](https://developers.cloudflare.com/workers/)
- [Agents SDK](https://developers.cloudflare.com/agents/)
- [MCP Protocol](https://modelcontextprotocol.io/)

Built with â¤ï¸ for Cloudflare's edge runtime. Questions? Open an issue!